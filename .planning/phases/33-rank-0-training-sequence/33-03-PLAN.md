---
phase: 33-rank-0-training-sequence
plan: 03
type: execute
---

<objective>
Write the full intercom scripts for all 6 training scenarios and update journal entries to reflect training content.

Purpose: The tutorial infrastructure (Phase 31) and data model (33-01) are in place — now we need the actual content. Each scenario gets intercom messages that teach through garbled static with clear keywords. Journal pages update as the player completes each scenario.

Output: Updated `src/data/tutorialSteps.ts` with ~12-15 tutorial steps, updated `src/data/journalEntries.ts` with training-specific content
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Prior phase context:
@.planning/phases/31-tutorial-infrastructure/31-02-SUMMARY.md
@.planning/phases/32-journal-system/32-01-SUMMARY.md
@.planning/phases/33-rank-0-training-sequence/33-01-SUMMARY.md
@.planning/phases/33-rank-0-training-sequence/33-02-SUMMARY.md

# Relevant source files:
@src/types/tutorial.ts
@src/data/tutorialSteps.ts
@src/data/trainingScenarios.ts
@src/data/journalEntries.ts
@src/components/IntercomText.tsx
@src/components/IntercomMessage.tsx

# Text reference:
@TEXT_MANIFEST.md

**Established patterns:**
- IntercomMessage: { keywords: string[], fullText: string }
- TutorialStep: { id, rank, trigger, message, requiresAction?, autoAdvanceMs? }
- Garble renderer: non-keyword chars become industrial static, keywords render clearly
- JournalPage: { id, title, icon, unlockedBy, sections[] }
- JournalSection: { heading, body }

**Narrative tone (from PRD):**
- Corporate onboarding: "Welcome to [Company]. Your training begins now."
- Mundane, grungy, uncaring environment
- Employer speaks through low-quality intercom/PA system
- Static corrupts most words, key terms come through clearly
- Key terms = the actual game mechanic being taught
</context>

<tasks>

<task type="auto">
  <name>Task 1: Write full tutorial steps for all training scenarios</name>
  <files>src/data/tutorialSteps.ts</files>
  <action>
Replace the 2 placeholder steps with the full training sequence. Each scenario gets 2 steps: an intro message (plays at scenario start) and a completion message (plays when scenario is won).

**Narrative voice:** Bored corporate trainer. Short sentences. Technical terms are the keywords. Think "safety video narrator who doesn't care."

**0TA — Tank Rotation (2 steps):**
1. WELCOME (ON_GAME_START at rank 0, first scenario only):
   - keywords: ["Welcome", "operator", "training"]
   - fullText: "Welcome aboard, operator. Standard safety training is mandatory before your first shift."
   - autoAdvanceMs: 5000

2. ROTATE_INTRO (ON_GAME_START, plays after WELCOME):
   - keywords: ["Rotate", "tank", "swipe", "cracks"]
   - fullText: "Rotate the tank left and right to locate cracks. Swipe or use A/D keys. Seal all cracks to proceed."
   - requiresAction: 'ROTATE' (waits for player to rotate)

**0TB — Piece Placement (2 steps):**
3. DROP_INTRO (ON_GAME_START for scenario 0TB):
   - keywords: ["piece", "rotate", "Q", "E", "drop"]
   - fullText: "Each piece can be rotated with Q and E before you drop it. Tap to fast drop. Swipe down for soft drop."
   - requiresAction: 'DROP' (waits for player to place a piece)

4. DROP_COMPLETE (fires on scenario completion — use TRAINING_SCENARIO_COMPLETE event or trigger MANUAL after scenario win):
   - keywords: ["Adequate", "placement"]
   - fullText: "Adequate. Your placement skills meet minimum safety requirements."
   - autoAdvanceMs: 3000

**0TC — Color Matching (2 steps):**
5. CRACK_INTRO (ON_GAME_START for scenario 0TC):
   - keywords: ["color", "match", "crack", "seal"]
   - fullText: "Cracks come in different colors. Only matching color goop will seal a crack. Place the right color on the right crack."
   - autoAdvanceMs: 6000

6. CRACK_COMPLETE:
   - keywords: ["Color", "certification", "passed"]
   - fullText: "Color certification passed. You can tell red from blue. Impressive."
   - autoAdvanceMs: 3000

**0TD — Pop Timing (2 steps):**
7. POP_TIMING (ON_GAME_START for scenario 0TD):
   - keywords: ["stack", "pressure", "higher", "cracks", "pop"]
   - fullText: "Some cracks are higher up. Stack goop to reach them. But excess goop builds pressure. Pop groups to relieve it before the tank overflows."
   - autoAdvanceMs: 8000

8. POP_COMPLETE:
   - keywords: ["Pressure", "management", "acceptable"]
   - fullText: "Pressure management acceptable. Most trainees fail this one. Don't let it go to your head."
   - autoAdvanceMs: 3000

**0TE — Cylindrical Wrapping (2 steps):**
9. WRAP_INTRO (ON_GAME_START for scenario 0TE):
   - keywords: ["wraps", "around", "edge", "continues"]
   - fullText: "The tank wraps around. Goop placed past the edge continues on the other side. Use this to seal cracks near the seam."
   - autoAdvanceMs: 6000

10. WRAP_COMPLETE:
    - keywords: ["Spatial", "awareness", "noted"]
    - fullText: "Spatial awareness noted. You understand the tank is round. Congratulations."
    - autoAdvanceMs: 3000

**0TF — First Real Shift (2 steps):**
11. FIRST_SHIFT (ON_GAME_START for scenario 0TF):
    - keywords: ["real", "shift", "75 seconds", "everything"]
    - fullText: "Training complete. Time for your first real shift. You have 75 seconds. Use everything you learned. Good luck, operator."
    - autoAdvanceMs: 6000

12. SHIFT_COMPLETE (fires on 0TF completion):
    - keywords: ["survived", "first shift", "Rank 1"]
    - fullText: "You survived your first shift. Promoted to Rank 1. Report back for your next assignment."
    - autoAdvanceMs: 4000

**Implementation notes:**
- Add new TutorialStepIds to the union type in `types/tutorial.ts` for any new IDs (DROP_COMPLETE, CRACK_COMPLETE, POP_COMPLETE, WRAP_COMPLETE, SHIFT_COMPLETE)
- For scenario-start triggers, use `{ type: 'ON_GAME_START', rank: 0 }` — the training flow controller will determine which scenario's steps to show based on which scenario is active
- For completion triggers, use `{ type: 'ON_EVENT', event: 'TRAINING_SCENARIO_COMPLETE' }` or `{ type: 'MANUAL' }` if the training flow controller triggers them directly
- Keep the `rank: 0` field on all training steps

The exact trigger wiring may need adjustment based on how useTutorial and useTrainingFlow interact. Prioritize getting the content right — trigger wiring can be refined.
  </action>
  <verify>Run `npm run test:run` — all tests pass, no TS errors</verify>
  <done>12 tutorial steps defined across 6 scenarios, new TutorialStepIds added to type union, all steps have keywords + fullText in corporate-mundane voice</done>
</task>

<task type="auto">
  <name>Task 2: Update journal entries for training content</name>
  <files>src/data/journalEntries.ts, TEXT_MANIFEST.md</files>
  <action>
Update journal page content to reflect what the player actually learns in each training scenario. The existing pages (BASICS, CONTROLS, POPPING, SCORING, CRACKS, WRAPPING) are stubs from Phase 32 — flesh them out with practical info the player just experienced.

For each page, update sections with clear, helpful content:

**BASICS** (always visible):
- "The Tank": The pressure tank is cylindrical. Your job is to seal cracks before time runs out.
- "Goop": Colored goop falls from above. Place it on matching cracks to seal them.

**CONTROLS** (unlocks on ROTATE_INTRO):
- "Tank Rotation": Swipe left/right or A/D keys to rotate the tank view.
- "Piece Controls": Q/E to rotate piece. Tap to fast drop. Swipe down for soft drop.

**POPPING** (unlocks on POP_TIMING):
- "Pressure": Goop builds pressure. Pop matching groups to relieve it.
- "Stacking": Stack goop to reach higher cracks, but manage the pressure.

**SCORING** (unlocks on FIRST_SHIFT):
- "Shifts": Each shift is 75 seconds. Seal all cracks to succeed.
- "Rank": Complete shifts to earn XP and rank up. Higher ranks unlock new challenges.

**CRACKS** (unlocks on CRACK_INTRO):
- "Color Matching": Cracks have colors. Only matching goop seals them.
- "Finding Cracks": Rotate the tank to locate all cracks.

**WRAPPING** (unlocks on WRAP_INTRO):
- "Cylindrical Tank": The tank wraps around. Goop placed past the edge continues on the other side.
- "Edge Strategy": Use wrapping to place goop where direct placement is difficult.

Keep language short, direct, practical. No flavor text in the journal — it's a reference document, not narrative.

Also update TEXT_MANIFEST.md with any new/changed text strings.
  </action>
  <verify>Run `npm run test:run` — all tests pass, no TS errors</verify>
  <done>All 6 journal pages have substantive content, unlock triggers match training scenario completion steps, TEXT_MANIFEST.md updated</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run test:run` passes all existing tests
- [ ] No TypeScript errors
- [ ] All 12 tutorial steps have keywords and fullText
- [ ] All 6 journal pages have substantive sections
- [ ] Narrative voice is consistent (bored corporate trainer)
- [ ] TEXT_MANIFEST.md reflects all text changes
</verification>

<success_criteria>

- Full intercom script for 6 scenarios (12 steps)
- Journal pages fleshed out with practical training content
- All content follows established narrative voice
- TEXT_MANIFEST.md kept in sync
- No regressions in existing tests
  </success_criteria>

<output>
After completion, create `.planning/phases/33-rank-0-training-sequence/33-03-SUMMARY.md`
</output>
