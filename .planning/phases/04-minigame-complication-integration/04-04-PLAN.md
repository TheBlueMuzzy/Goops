---
phase: 04-minigame-complication-integration
plan: 04
type: execute
---

<objective>
Update all documentation with approved complication specifications.

Purpose: Ensure PRD and planning docs accurately reflect the implemented complication system.
Output: Documentation matches code, no more TBD or incorrect specs.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-minigame-complication-integration/04-02-SUMMARY.md
@.planning/phases/04-minigame-complication-integration/04-03-SUMMARY.md
@PRD.md

**Approved complication specifications:**

LASER Complication (Rank 1+):
- Trigger: Cumulative units popped threshold (12-24 range)
- Effect: Two-tap mechanic (first tap primes group, second tap pops)
- Minigame: 4 sliders match indicator lights

LIGHTS Complication (Rank 3+):
- Trigger: 50% chance on piece lock when pressure is 3-5 rows above highest goop
- Effect: Dims to 10%, desaturates to grayscale over 1.5s (alert exempt)
- Minigame: Sequence memory (slider → watch 4 buttons → repeat → slider)

CONTROLS Complication (Rank 2+):
- Trigger: 20 rotation inputs within 3 seconds
- Effect: 2 inputs per move, holding works at half speed
- Minigame: Dial alignment (4 corners in sequence)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update PRD.md with approved specs</name>
  <files>PRD.md</files>
  <action>
  Update the "Complication Effects (while unfixed)" section:
  - Replace "Reset Lights: TBD visual impairment" with actual spec
  - Replace "Reset Laser: Laser disabled" with actual two-tap mechanic
  - Replace "Reset Controls: Tank rotation disabled" with actual spec

  Update Open Questions section:
  - Remove "Complication effects" question (now answered)

  Add any missing trigger details to the Complications System section.
  </action>
  <verify>PRD accurately describes all three complication triggers and effects</verify>
  <done>PRD reflects implemented complication system</done>
</task>

<task type="auto">
  <name>Task 2: Update STATE.md with current status</name>
  <files>.planning/STATE.md</files>
  <action>
  Update current position and status:
  - Phase 4 in progress (not complete)
  - Document completed LIGHTS and CONTROLS rewrites
  - Update "What's Next" section

  Add key technical discoveries from the implementations if any.
  </action>
  <verify>STATE.md reflects current project status</verify>
  <done>STATE.md is up to date</done>
</task>

<task type="auto">
  <name>Task 3: Update PROJECT.md validated requirements</name>
  <files>.planning/PROJECT.md</files>
  <action>
  Move from Active to Validated:
  - Complications — triggers and effects defined
  - Minigame-Complication integration — wired and working

  Update context section with implementation details.
  </action>
  <verify>PROJECT.md reflects milestone completion</verify>
  <done>PROJECT.md shows all Phase 4 work validated</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] PRD complication section is accurate
- [ ] STATE.md shows Phase 4 complete
- [ ] PROJECT.md requirements validated
- [ ] No TBD or incorrect specs remain
</verification>

<success_criteria>
- All tasks completed
- Documentation matches implementation
- Milestone ready for merge
</success_criteria>

<output>
After completion, create `.planning/phases/04-minigame-complication-integration/04-04-SUMMARY.md`
</output>
