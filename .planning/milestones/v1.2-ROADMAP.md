# Milestone v1.2: Progression System

**Status:** ✅ SHIPPED 2026-01-24
**Phases:** 14-18
**Total Plans:** 14

## Overview

Full ranks 0-39 progression system with 4 bands (Onboarding, Junk, Mixer, Cracked), 20 upgrades across passive/active/feature types, active ability system, and 3 new colors (Orange, Purple, White).

## Phases

### Phase 14: Data Architecture

**Goal**: Redesign upgrade system data structures, implement progression table, configure level effects
**Depends on**: v1.1 Architecture Refactor complete
**Plans**: 2 plans

Plans:
- [x] 14-01: Upgrade system overhaul (types, 20 upgrades with level effects)
- [x] 14-02: Complication & color config (unlock ranks, color schedule)

**Details:**
- Added 'feature' to UpgradeType union (passive | active | feature)
- 20 upgrades organized into 4 bands with rank-based unlocks
- V1.2 complication unlock ranks (LIGHTS@2, LASER@4, CONTROLS@6)
- Color schedule: Base 4 + Orange@10, Purple@20, White@30

### Phase 15: Onboarding Band

**Goal**: Implement ranks 0-9 upgrades
**Depends on**: Phase 14
**Plans**: 4 plans

Plans:
- [x] 15-01: Upgrade ID migration + UpgradePanel update
- [x] 15-02: Complication upgrade effects (Circuit Stabilizer, Capacitor Efficiency, Gear Lubrication)
- [x] 15-03: Game mechanics (Pressure Control, Focus Mode, Dense Goop)
- [x] 15-04: Auto-Popper + Cooldown Booster active

**Details:**
| Upgrade | Rank | Type | Effect per Level |
|---------|------|------|------------------|
| Circuit Stabilizer | 2 | passive | -7.5% trigger chance |
| Auto-Popper | 3 | passive | -4% end-game decay |
| Capacitor Efficiency | 4 | passive | -6.25% drain rate |
| Cooldown Booster | 5 | active | +25% cooldown extension |
| Gear Lubrication | 6 | passive | +12.5% dissipation |
| Focus Mode | 7 | passive | -10% time speed |
| Dense Goop | 8 | passive | +12.5% fall speed |
| Pressure Control | 9 | passive | +5s game time |

### Phase 16: Junk Band

**Goal**: Implement Junk Goop features, Orange color, Junk Band upgrades
**Depends on**: Phase 15
**Plans**: 3 plans

Plans:
- [x] 16-01: JUNK_UNIFORMER + Orange verification
- [x] 16-02: GOOP_SWAP upgrade effect
- [x] 16-03: Lights malfunction rework (brightness-based, player-controlled)

**Details:**
- JUNK_UNIFORMER: +10% per level same-color bias for starting junk
- GOOP_SWAP: Dynamic hold duration scaling
- GOOP_DUMP: Pieces rain from top with ghost appearance
- SEALING_BONUS: Bonus XP for sealing cracks
- Lights malfunction rework: Soft dropping charges brightness, idling dims

### Phase 17: Mixer Band

**Goal**: Implement Purple color, 2nd active slot, piece previews, GOOP_COLORIZER
**Depends on**: Phase 16
**Plans**: 3 plans

Plans:
- [x] 17-01: Purple color + ACTIVE_EXPANSION_SLOT (2nd active slot)
- [x] 17-02: GOOP_HOLD_VIEWER + GOOP_WINDOW (piece previews)
- [x] 17-03: GOOP_COLORIZER active ability

**Details:**
- ACTIVE_EXPANSION_SLOT: Unlocks 2nd active ability slot
- GOOP_HOLD_VIEWER/GOOP_WINDOW: Hold and next piece previews at top of screen
- GOOP_COLORIZER: Locks next 6/7/8 pieces to current falling piece's color

### Phase 18: Cracked Band

**Goal**: Implement Expanding Cracks complication, White color, crack-related upgrades
**Depends on**: Phase 17
**Plans**: 2 plans

Plans:
- [x] 18-01: Expanding Cracks mechanic + SLOW_CRACKS passive
- [x] 18-02: CRACK_MATCHER passive + CRACK_DOWN active

**Details:**
- Expanding Cracks: Cracks grow to adjacent cells over time
- SLOW_CRACKS: -15% per level crack expansion rate
- CRACK_MATCHER: +25% per level bias toward lowest crack color
- CRACK_DOWN: Next 3/5/7 cracks spawn in bottom 4 rows

---

## Milestone Summary

**Key Decisions:**
- Active ability charging: 1%/sec + 10% per crack seal (rewards crack-goop sealing)
- Equip checkbox in UpgradePanel (simple UI, no extra screen)
- Per-ability charge times: Cooldown Booster 20s, Goop Dump 15s, Goop Colorizer 25s, Crack Down 30s
- All actives have 3 levels with scaling effects
- Lights malfunction: Player-controlled brightness (soft drop to charge, idle to dim)
- CRACK_MATCHER applies to next piece generation (provides preview benefit)

**Issues Resolved:**
- Lights trigger felt random → reworked to player-controlled brightness system
- Active abilities needed differentiation → per-ability charge times and level scaling

**Issues Deferred:**
- Pressure not rising bug (investigate after milestone)
- Falling pieces don't interact with cracks (investigate after milestone)
- Tetris movement feel research (lock delay, sideways into gaps)

**Technical Debt Incurred:**
- None significant

---

_For current project status, see .planning/ROADMAP.md_
